{"version":3,"sources":["components/Monitoring/mqtt/api/Api.js","components/Monitoring/mqtt/api/Websocket.js","components/Monitoring/mqtt/mqtt.js","components/Monitoring/utils/notification.js","assets/images/notification_blue.png","components/Monitoring/marker/api/Api.js","assets/images/accident.png","components/Monitoring/marker/AccidentMarkers.js","assets/images/cctv.png","components/Monitoring/marker/CCTVMarkers.js","components/Monitoring/marker/CenterMarkers.js","components/Monitoring/marker/index.js","components/Monitoring/api/RoadApi.js","components/Monitoring/polyline/RoadPolyline.js","assets/images/exclamation_mark.gif","assets/images/check_mark.png","components/Monitoring/api/GuardrailApi.js","components/Monitoring/AccidentEvents.js","assets/images/back_button.jpg","components/Monitoring/api/PolygonApi.js","components/Monitoring/polygon/utils.js","components/Monitoring/polygon/Polygons.js","components/Monitoring/Map.js","components/Dashboard/Default.js","components/Monitoring/utils/ApiManager.js","components/Monitoring/utils/index.js"],"names":["$http","ApiManager","postMessage","data","url","BASE_URL","post","websocketUrl","MQTTS_URL","options","host","split","port","protocol","rejectUnauthorized","mqttOptions","retain","qos","mqttServices","getClient","errorHandler","client","mqtt","connect","stream","on","err","toString","end","subscribe","topic","granted","onMessage","callBack","message","packet","JSON","parse","TextDecoder","decode","unsubscribe","closeConnection","MQTT","props","handleChange","e","setState","target","name","value","handleClick","state","a","async","handleSendMQTT","mqttData","errno","alert","code","sqlMessage","notification","console","log","MQTTApi","result","this","InputGroup","className","DropdownButton","as","Prepend","title","id","Dropdown","Item","href","onClick","Divider","FormControl","placeholder","onChange","Button","variant","Component","WebNotification","ignore","handleSetNotification","bind","tag","filename","document","getElementById","play","body","Util","Date","now","icon","requireInteraction","notSupported","handleNotSupported","onPermissionGranted","handlePermissionGranted","onPermissionDenied","handlePermissionDenied","onShow","handleNotificationOnShow","handleNotificationOnClick","onClose","handleNotificationOnClose","onError","handleNotificationOnError","timeout","React","getCCTVList","getAccidentInfo","get","getAccidentList","AccidentMarkers","handleRenderMarkers","imageIcon","accidentIcon","scaledSize","window","N","Size","anchor","Point","accidentData","map","item","index","array","key","position","LatLng","guardrailLatitude","guardrailLongitude","guardrailID","animation","handleMarkerClick","activatedInfoWindow","time","nextProps","nextState","nextContext","handleGetAccidentList","interval","setInterval","clearInterval","AccidentApi","lat","lng","zoom","changeZoom","changeCenter","setTimeout","infoWindowContent","infoWindow","InfoWindow","content","backgroundColor","borderColor","borderWidth","anchorSize","anchorSkew","anchorColor","pixelOffset","open","getMap","close","prevState","defaultProps","CCTVMarkers","cctvIcon","cctvData","its","dataCount","coordY","coordX","cctvName","handleClickCCTV","cctvURL","ex","getZoom","prevProps","snapshot","handleGetCCTVList","bounds","getBounds","MinX","_min","x","MaxX","_max","MinY","y","MaxY","CCTVApi","cctvurl","handleClickAccidentMarker","handleOnClick","mapData","SIG","features","mapLevel","morph","centerData","duration","easing","centerArray","handleOnDblclick","CTPRVN","optimization","filter","item2","geometry","coordinates","centroid","flat","area","factor","centerX","centerY","forEach","element","length","centerMarkers","onDblclick","Markers","getAccidentRoad","getRoadData","RoadPolyline","handleGetAccidentRoadData","roadName","roadData","accidentRoadData","cityprovinceCode","indexOf","handleGetRoadLatLng","areaRoadData","properties","RN","item3","handleRenderPolyline","path","strokeColor","strokeOpacity","strokeWeight","handleGetRoadData","handleGetAccidentRoad","RoadApi","postFixGuardrail","AccidentEvents","handleToggleModal","modalVisible","selectedGuardrailIndex","handleCloseModal","preventDefault","handleRenderModal","accidentInfo","address","cityprovinceName","districtName","emdName","date","dateFormatConverter","accidentDate","guardrailState","Modal","show","onHide","size","aria-labelledby","centered","Header","closeButton","Title","Body","style","color","Footer","handleFixGuardrail","handleRenderAccidentEventsTable","width","src","exclamationMarkIcon","alt","marginLeft","checkMarkIcon","CONSTANT","BLANK_LINK","coord","handleGetAccidentInfo","GuardrailApi","Card","Table","responsive","hover","getPolygonData","areaChange","ctpName","SIG_CD","substring","includes","centerXY","zeroIndex","push","centroidData","Polygons","handleSelectedArea","CTPRVN_CD","districtCode","accidentAreaOfCityprovinceCode","accidentArea","accidentAreaOfDistrictCode","accidentAreaCityprovinceIndex","accidentAreaDistrictIndex","accidentAreaIndex","handleWatchMapData","geoData","handleRenderPolygons","paths","fillColor","fillOpacity","clickable","handleMouseClick","onMouseover","onMouseout","prevMapData","handleGetPolygonData","mapInterval","PolygonApi","Utils","Map","handleChangeBounds","changeBounds","mapRef","handleGetBounds","handleRenderStats","Col","md","xl","scrollWheel","disableDoubleClickZoom","disableDoubleTapZoom","maxZoom","minZoom","center","handleBackButton","transitionOptions","Event","once","backButtonHtml","backButtonIcon","customControl","CustomControl","Position","TOP_LEFT","setMap","addDOMListener","getElement","handleZoomChanged","height","naverRef","ref","onZoomChanged","onIdle","handleCenterChanged","handleMorph","handleGetMap","Dashboard","ncpClientId","error","loading","setHeaders","headers","getHeaders","getRequest","delete","stringify","deleteRequest","postRequest","put","multipart","multipartRequest","method","fetch","response","json","responseJson","bodyData","Accept","processData","contentType","mimeType","instance","timestampDefaultFormat","Y","M","D","h","m","s","ts","customFormat","filters","format","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","rr","i"],"mappings":"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","file":"static/js/7.6e85831a.chunk.js","sourcesContent":["import { ApiManager } from '../../utils'\r\nimport { BASE_URL } from '../../../../constant';\r\n\r\nconst $http = new ApiManager();\r\n\r\nexport function postMessage(data) {\r\n    const url = `${BASE_URL}/mqtt`;\r\n    return $http.post(url, data);\r\n}","import mqtt from 'mqtt';\r\n\r\nimport { MQTT_URL, MQTTS_URL } from \"../../../../constant\";\r\n\r\nconst websocketUrl = MQTTS_URL;\r\n\r\nconst options = {\r\n    host: websocketUrl.split(':')[0],\r\n    port: websocketUrl.split(':')[1],\r\n    protocol: 'mqtts',\r\n    //username: '',\r\n    //password: ''\r\n    rejectUnauthorized: false\r\n};\r\n\r\nconst mqttOptions = {\r\n    retain: true,\r\n    qos: 2\r\n};\r\n\r\nfunction getClient(errorHandler) {\r\n    const client = mqtt.connect(options);\r\n\r\n    client.stream.on('error', (err) => {\r\n        errorHandler(`Connection to ${websocketUrl} failed`, ` => `, err.toString());\r\n        client.end();\r\n    });\r\n\r\n    return client;\r\n}\r\n\r\nfunction subscribe(client, topic, errorHandler) {\r\n    const callBack = (err, granted) => {\r\n        if (err) {\r\n            errorHandler('Subscription request failed', ' => ' + err.toString());\r\n        }\r\n    };\r\n\r\n    return client.subscribe(topic, mqttOptions, callBack);\r\n}\r\n\r\nfunction onMessage(client, callBack) {\r\n    client.on('message', (topic, message, packet) => {\r\n        callBack(JSON.parse(new TextDecoder('utf-8').decode(message)));\r\n    });\r\n}\r\n\r\nfunction unsubscribe(client, topic) {\r\n    client.unsubscribe(topic);\r\n}\r\n\r\nfunction closeConnection(client) {\r\n    client.end();\r\n}\r\n\r\nconst mqttServices = {\r\n    getClient,\r\n    subscribe,\r\n    onMessage,\r\n    unsubscribe,\r\n    closeConnection,\r\n};\r\n\r\nexport default mqttServices;","import React, { Component } from 'react';\r\nimport * as MQTTApi from './api/Api';\r\n\r\nimport {Button, Dropdown, DropdownButton, FormControl, InputGroup} from 'react-bootstrap';\r\n\r\nimport Aux from \"../../../hoc/_Aux\";\r\n\r\nimport mqttServices from './api/Websocket';\r\n\r\nexport default class MQTT extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            mqttData: null,\r\n            topic: '',\r\n            message: '',\r\n            mqtt: {\r\n                topic: '',\r\n                message: ''\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        /*\r\n         * Initiating connection\r\n         *\r\n        useEffect(() => {\r\n            const client = mqttService.getClient(storeError);\r\n            storeMqttClient(client);\r\n            const callBack = (mqttMessage) => handleMessage(mqttMessage);\r\n            mqttService.onMessage(client, callBack);\r\n            return () => mqttService.closeConnection(client);\r\n        }, []);\r\n        */\r\n        /*\r\n         * Subscribing and unsubscribing from MQTT topics\r\n         *\r\n        function rowSelectionHandler(newTopic) {\r\n            const topicHasChanged = // Check if I the topic has changed\r\n            const topic = // The current topic\r\n            if (topicHasChanged) {\r\n                mqttService.unsubscribe(mqttClient, topic);\r\n            }\r\n            mqttService.subscribe(mqttClient, newTopic, storeError);\r\n        }\r\n        */\r\n        const client = mqttServices.getClient(console.log);\r\n\r\n        mqttServices.subscribe(client, '#', console.log);\r\n        mqttServices.onMessage(client, console.log);\r\n    }\r\n\r\n    async handleSendMQTT(data) {\r\n        const result = await MQTTApi.postMessage(data);\r\n\r\n        this.setState({mqttData: result});\r\n    };\r\n\r\n    handleChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    };\r\n\r\n    handleClick = () => {\r\n        if (this.state.topic && this.state.message) {\r\n            const data = {\r\n                topic: this.state.topic,\r\n                message: this.state.message\r\n            };\r\n\r\n            const sendMessage = async () => {\r\n                await this.handleSendMQTT(data);\r\n                await this.state.mqttData;\r\n\r\n                if (this.state.mqttData[0].errno) {\r\n                    alert('입력값을 확인해주세요\\n\\n' +\r\n                        'Code: ' + this.state.mqttData[0].code + '\\n\\n' +\r\n                        'Message: ' + this.state.mqttData[0].sqlMessage);\r\n                } else {\r\n                    this.props.notification(data);\r\n\r\n                    this.setState({\r\n                        mqtt: {\r\n                            ...this.state.mqtt,\r\n                            topic: data.topic,\r\n                            message: data.message\r\n                        },\r\n                        topic: '',\r\n                        message: ''\r\n                    });\r\n                }\r\n            };\r\n\r\n            sendMessage();\r\n        } else {\r\n            alert('빈 칸이 있는지 확인해주세요');\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                <InputGroup className=\"mb-3\">\r\n                    <DropdownButton as={InputGroup.Prepend} title=\"Topic\" id=\"input-group-dropdown-1\">\r\n                        <Dropdown.Item href=\"#\" onClick={() => this.setState({topic: '26/530/106'})}>1번 가드레일</Dropdown.Item>\r\n                        <Dropdown.Divider/>\r\n                        <Dropdown.Item href=\"#\" onClick={() => this.setState({topic: '26/230/108'})}>2번 가드레일</Dropdown.Item>\r\n                        <Dropdown.Divider/>\r\n                        <Dropdown.Item href=\"#\" onClick={() => this.setState({topic: '26/350/105'})}>3번 가드레일</Dropdown.Item>\r\n                        <Dropdown.Divider/>\r\n                        <Dropdown.Item href=\"#\" onClick={() => this.setState({topic: '26/350/105'})}>4번 가드레일</Dropdown.Item>\r\n                    </DropdownButton>\r\n                    <FormControl\r\n                        name='topic'\r\n                        placeholder=\"cityprovince/district/emd (e.g. 26/530/106)\"\r\n                        value={this.state.topic}\r\n                        onChange={this.handleChange}\r\n                    />\r\n                </InputGroup>\r\n                <InputGroup className=\"mb-3\">\r\n                    <DropdownButton as={InputGroup.Prepend} title=\"Message\" id=\"input-group-dropdown-1\">\r\n                        <Dropdown.Item href=\"#\" onClick={() => this.setState({message: '35.1510807803644,129.006081704281,100,1'})}>1번 가드레일</Dropdown.Item>\r\n                        <Dropdown.Divider/>\r\n                        <Dropdown.Item href=\"#\" onClick={() => this.setState({message: '35.19140977178646,128.9902849903807,100,2'})}>2번 가드레일</Dropdown.Item>\r\n                        <Dropdown.Divider/>\r\n                        <Dropdown.Item href=\"#\" onClick={() => this.setState({message: '35.16952116144408,129.13841596675306,100,3'})}>3번 가드레일</Dropdown.Item>\r\n                        <Dropdown.Divider/>\r\n                        <Dropdown.Item href=\"#\" onClick={() => this.setState({message: '35.16955559722969,129.13832460847368,100,4'})}>4번 가드레일</Dropdown.Item>\r\n                    </DropdownButton>\r\n                    <FormControl\r\n                        name='message'\r\n                        placeholder=\"lat,lng,colweight,moduleid (e.g. 35.1510807803644,129.006081704281,100,1)\"\r\n                        value={this.state.message}\r\n                        onChange={this.handleChange}\r\n                    />\r\n                    <Button variant='secondary' onClick={this.handleClick}>Send</Button>\r\n                </InputGroup>\r\n                {/*<p>Topic :\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"topic\"\r\n                        placeholder=\"26/530/106\"\r\n                        value={this.state.topic}\r\n                        onChange={this.handleChange}>\r\n                    </input>\r\n                </p>\r\n                <p>Message :\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"message\"\r\n                        placeholder=\"lat,long,colweight,moduleid\"\r\n                        value={this.state.message}\r\n                        onChange={this.handleChange}>\r\n                    </input>\r\n                </p>\r\n                <Button variant={'secondary'} onClick={this.handleClick}>Send</Button>*/}\r\n            </Aux>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport Notification from 'react-web-notification';\r\nimport * as Util from './index';\r\nimport MQTT from \"../mqtt/mqtt\";\r\n\r\nimport Aux from \"../../../hoc/_Aux\";\r\n\r\nimport * as CONSTANT from \"../../../constant\";\r\nimport notificationIcon from '../../../assets/images/notification_blue.png'\r\n\r\nexport default class WebNotification extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ignore: true,\r\n            title: ''\r\n        };\r\n\r\n        this.handleSetNotification = this.handleSetNotification.bind(this);\r\n    }\r\n\r\n    handlePermissionGranted() {\r\n        console.log('Permission Granted');\r\n        this.setState({\r\n            ignore: false\r\n        });\r\n    }\r\n\r\n    handlePermissionDenied() {\r\n        console.log('Permission Denied');\r\n        this.setState({\r\n            ignore: true\r\n        });\r\n    }\r\n\r\n    handleNotSupported() {\r\n        console.log('Web Notification not Supported');\r\n        this.setState({\r\n            ignore: true\r\n        });\r\n    }\r\n\r\n    handleNotificationOnClick(e, tag) {\r\n        console.log(e, 'Notification clicked tag:' + tag);\r\n    }\r\n\r\n    handleNotificationOnError(e, tag) {\r\n        console.log(e, 'Notification error tag:' + tag);\r\n    }\r\n\r\n    handleNotificationOnClose(e, tag) {\r\n        console.log(e, 'Notification closed tag:' + tag);\r\n    }\r\n\r\n    handleNotificationOnShow(e, tag) {\r\n        //this.playSound();\r\n        console.log(e, 'Notification shown tag:' + tag);\r\n    }\r\n\r\n    playSound(filename) {\r\n        document.getElementById('sound').play();\r\n    }\r\n\r\n    handleSetNotification(data) {\r\n        if (this.state.ignore) {\r\n            return;\r\n        }\r\n\r\n        const dateString = Util.dateFormatConverter(new Date());\r\n\r\n        const title = '사고 발생!';\r\n        const body = '발생 시각: ' + dateString + '\\n' + 'Message: ' + data.message;\r\n        const tag = Date.now(); // not working?\r\n        const icon = notificationIcon;\r\n\r\n        // Available options\r\n        // See https://developer.mozilla.org/en-US/docs/Web/API/Notification/Notification\r\n        const options = {\r\n            tag: tag,\r\n            body: body,\r\n            icon: icon,\r\n            requireInteraction: false,\r\n            //dir: 'ltr',\r\n            /*actions: [{\r\n                title: '액션 1',\r\n                action: 'action-1'\r\n            }, {\r\n                title: '액션 2',\r\n                action: 'action-2'\r\n            }],*/\r\n            //sound: ''  // no browsers supported https://developer.mozilla.org/en/docs/Web/API/notification/sound#Browser_compatibility\r\n        };\r\n\r\n        this.setState({\r\n            title: title,\r\n            options: options\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                {/*<Button variant={'info'} onClick={this.handleSetNotification.bind(this)}>Notif!</Button>*/}\r\n                <Notification\r\n                    ignore={this.state.ignore && this.state.title !== ''}\r\n                    notSupported={this.handleNotSupported.bind(this)}\r\n                    onPermissionGranted={this.handlePermissionGranted.bind(this)}\r\n                    onPermissionDenied={this.handlePermissionDenied.bind(this)}\r\n                    onShow={this.handleNotificationOnShow.bind(this)}\r\n                    onClick={this.handleNotificationOnClick.bind(this)}\r\n                    onClose={this.handleNotificationOnClose.bind(this)}\r\n                    onError={this.handleNotificationOnError.bind(this)}\r\n                    timeout={0}\r\n                    title={this.state.title}\r\n                    options={this.state.options}\r\n                />\r\n\r\n                {/*<audio id='sound' preload='auto'>\r\n                    <source src='./sound.mp3' type='audio/mpeg' />\r\n                    <source src='./sound.ogg' type='audio/ogg' />\r\n                    <embed hidden={true} autostart='false' loop={false} src='./sound.mp3' />\r\n                </audio>*/}\r\n\r\n                <MQTT notification={this.handleSetNotification}/>\r\n            </Aux>\r\n        )\r\n    }\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEeUlEQVR4nNWbz4scRRTHP7ukZV1UMOQXkkTMQTwtHtYVNiY0RQg5LGQJYVlc/Qv8S/wDPHjXg+Apf0BTEA1EPYh/QUxyWE/qOshiLcFDv6yzM9099apezawfaKYY6sd733nVXVX9ZomCOB8eApczu3ne1NUNC3u6WCrVsfNhA3g8o9rP8vn+jHofNnX1Q75V0yyX6FTYi6jzjVwWfSVRRADnwxlgN6LqgVyz2JU+zSkVAbeACxH1YgW4IH2aU0qATyPrxQqg6VOFuQDOh9eA7cjqGgG2pW9TSsyrbWA1su6Xin5Xpe+v1BYNUGIKaEL1b7lK9B2F6TrA+XAJeEZ8ZF2Uz98i6x8BV5q62tfa1od1BOyim1aaewDSd8zjNRprATQLlqOmrg6bujqk/WVLjDETMwGcD+8B64omf/SUZ7EuY5lgGQHaX2Y0VtZMg5SxerEU4BNl/XGnR721bMbqxeQp4Hz4CHiobPYU+ELKnwFXle1vNHX1nbLNFFYLoZSQvAp8njlmtgDZU8D58Aqwk9D0AfCOXA8S2u/I2FlY3APuAGcT2u03dfWkqasnQMrC5qyMnYWFAKnL04Oe8jzGPiZLAOfDG8BWYvM/e8oatsSGZHIj4D6wktjWIgJWxIZkcgXICcFRT3meNqQL4Hy4DNzMGNsiAgBuii1J5ETAx5ntrQRYFluSG6eSux63EgAybEkSwPmwBqylDipYCrAmNqlJXQpb7Ma+dj4cSjn1STLOHvCLtpF6M+R8WAZ+Jf+dnzXPgbebunqhaZQyBWpOn/PQ2lRrG6UIYHUYcR54U67zRn2qbVNNAefDCu0JbtbyExg1dfX6RN9/AbkvPg6Ai3LOGIU2ArbIdx66zwA154J9qPcmWgGsXkyUEgCUNkYL4Hww2X8LXc/93LXAS+6IrVFoImAHyD6BEUpGgOqESiOA5QuJkgKAwtYoAZwP14DNZHOmKTkFADbF5pnERkDuzm+S0hEQvUOMdco6Sen3yO9yiLJ55kLI+bAO/Jhtzkm+Bb6f+O46mcdbHXzQ1NVPQxVidoMlUtTuY+9sF3vAoACDESCpac+AS4ZGzZN92oSK3tfvs+4Bjv+v89Da7oYqzBKgSGoacBd4deK6W2isQR96p4DzYZV252eemgZcb+rq0cR4m0zfGC0Y0e4QO5OxhiJgmzLOQ/l1wDiDeYtDApQKfyi/Epyk15dOAZwPxXJzhXlGAMAt8WmKvgjQprtpOGrqaupVmHynyRbT0Jte1ydAsfx8hkO95DTo9GlKAOfDu8BGQUOGQr3kNNgQ307QFQElf31YXARAh29dApiloPWwqAiADt9OCCCLkaiDhAwWKcA18fGYyQgoHf6w2CkAEz4eC5CR7qZlkREAE+l14xFwGzg3BwMWLcA5Wl+BkwKUXPqOM5QRlpotpuXY12XITnfTsugIgLH0upcRcI/4PzrlsuibILS+3oP/BJhX+MPpiAAQn5ecD2/RnvuV/B/xOP8AfVkcy9i9fpvFC+DKGdo74tM5DXrauP0vxK0RD30qJ/wAAAAASUVORK5CYII=\"","import { ApiManager } from '../../utils'\r\nimport { BASE_URL } from '../../../../constant';\r\n\r\nconst $http = new ApiManager();\r\n\r\nexport function getCCTVList(data) {\r\n    const url = `${BASE_URL}/cctv`;\r\n    return $http.post(url, data);\r\n}\r\n\r\nexport function getAccidentInfo() {\r\n    const url = `${BASE_URL}/accidentinfo`;\r\n    return $http.get(url);\r\n}\r\n\r\nexport function getAccidentList() {\r\n    const url = `${BASE_URL}/accident`;\r\n    return $http.get(url);\r\n}","export default __webpack_public_path__ + \"static/media/accident.66406733.png\";","import React, {Component} from 'react';\r\nimport {Marker} from \"react-naver-maps\";\r\nimport '../resource/css/AccidentMarkers.css'\r\nimport * as AccidentApi from './api/Api';\r\n\r\nimport Aux from \"../../../hoc/_Aux\";\r\n\r\nimport accidentIcon from '../../../assets/images/accident.png';\r\nimport {dateFormatConverter} from \"../utils\";\r\n\r\nexport default class AccidentMarkers extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            accidentData: null,\r\n            activatedInfoWindow: null,\r\n            time: 0,\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n        return (this.state.accidentData !== nextState.accidentData);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const getData = async () => {\r\n            await this.handleGetAccidentList();\r\n        };\r\n\r\n        getData();\r\n\r\n        this.interval = setInterval(() => this.handleGetAccidentList(), 2000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval);\r\n    }\r\n\r\n    async handleGetAccidentList() {\r\n        const result = await AccidentApi.getAccidentList();\r\n\r\n        this.setState({accidentData: result});\r\n    };\r\n\r\n    handleMarkerClick(index, lat, lng, zoom) {\r\n        this.props.changeZoom(zoom);\r\n        this.props.changeCenter(lat, lng);\r\n\r\n        setTimeout(() => {\r\n            this.props.getCCTVList();\r\n        }, 1000);\r\n\r\n        const infoWindowContent =\r\n            `<div class=\"iw_inner\">\r\n                <h3 style=\"text-align: center\">${this.state.accidentData[index].guardrailID}번 가드레일</h3>\r\n                <p>\r\n                    위도: ${this.state.accidentData[index].guardrailLatitude}<br/>\r\n                    경도: ${this.state.accidentData[index].guardrailLongitude}\r\n                </p>\r\n            </div>`;\r\n\r\n        const infoWindow = new window.N.InfoWindow({\r\n            position: new window.N.LatLng(lat, lng),\r\n            content: infoWindowContent,\r\n            backgroundColor: \"#eee\",\r\n            borderColor: \"#3F4D67\",\r\n            borderWidth: 5,\r\n            anchorSize: new window.N.Size(0, 20),\r\n            anchorSkew: true,\r\n            anchorColor: \"#eee\",\r\n            pixelOffset: new window.N.Point(0, -10)\r\n        });\r\n\r\n        infoWindow.open(this.props.getMap());\r\n\r\n        if (!this.state.activatedInfoWindow) {\r\n            this.setState({activatedInfoWindow: {[index]: false}});\r\n        }\r\n\r\n        if (!this.state.activatedInfoWindow[index]) {\r\n            infoWindow.open(this.props.getMap());\r\n        } else {\r\n            infoWindow.close();\r\n        }\r\n\r\n        this.setState(prevState => (\r\n            {activatedInfoWindow: {[index]: !prevState.activatedInfoWindow[index]}, ...prevState.activatedInfoWindow}));\r\n    }\r\n\r\n    handleRenderMarkers = () => {\r\n        /*const style = {\r\n            margin: '0px',\r\n            padding: '0px',\r\n            border: '0px solid transparent',\r\n            display: 'block',\r\n            maxWidth: 'none',\r\n            maxHeight: 'none',\r\n            WebkitUserSelect: 'none',\r\n            position: 'absolute',\r\n            width: '20px',\r\n            height: '30px',\r\n            left: '0px',\r\n            top: '0px'\r\n        };\r\n\r\n        const htmlIcon = {\r\n            content: `<img src=${accidentIcon} alt='accidentIcon' style=${style}/>`,\r\n            anchor: new window.N.Point(11, 30)\r\n        };*/\r\n\r\n        const imageIcon = {\r\n            url: accidentIcon,\r\n            scaledSize: new window.N.Size(20, 30),\r\n            anchor: new window.N.Point(10, 30)\r\n        };\r\n\r\n        return (\r\n            this.state.accidentData &&\r\n            this.state.accidentData.map((item, index, array) => {\r\n                return (\r\n                    <Marker\r\n                        key={index}\r\n                        position={\r\n                            new window.N.LatLng(item.guardrailLatitude, item.guardrailLongitude)\r\n                        }\r\n                        title={item.guardrailID + '번 가드레일'}\r\n                        icon={imageIcon}\r\n                        animation={0}\r\n                        onClick={() => this.handleMarkerClick(index, item.guardrailLatitude, item.guardrailLongitude, 8)}\r\n                    />)\r\n            })\r\n        );\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                {this.handleRenderMarkers()}\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nAccidentMarkers.defaultProps = {\r\n    changeZoom: () => {},\r\n    changeCenter: () => {},\r\n    getCCTVList: () => {},\r\n    getMap: () => {}\r\n};","export default __webpack_public_path__ + \"static/media/cctv.d79c437c.png\";","import React, {Component} from 'react';\r\nimport {Marker} from \"react-naver-maps\";\r\nimport * as CCTVApi from './api/Api';\r\nimport AccidentMarkers from \"./AccidentMarkers\";\r\n\r\nimport Aux from \"../../../hoc/_Aux\";\r\n\r\nimport cctvIcon from '../../../assets/images/cctv.png';\r\n\r\nexport default class CCTVMarkers extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            cctvData: null,\r\n            cctvURL: '',\r\n            activatedInfoWindow: null,\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n        return [\r\n            (this.state.cctvData !== nextState.cctvData),\r\n            (this.props.getZoom !== nextProps.getZoom)\r\n        ];\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.props.getZoom !== prevProps.getZoom) {\r\n            this.setState({cctvData: null});\r\n        }\r\n    }\r\n\r\n    handleClickAccidentMarker() {\r\n        const getData = async () => {\r\n            await this.handleGetCCTVList();\r\n        };\r\n\r\n        getData();\r\n    };\r\n\r\n    async handleGetCCTVList() {\r\n        const bounds = this.props.getBounds();\r\n\r\n        const data = {\r\n            MinX: bounds._min.x,\r\n            MaxX: bounds._max.x,\r\n            MinY: bounds._min.y,\r\n            MaxY: bounds._max.y\r\n        };\r\n\r\n        const result = await CCTVApi.getCCTVList(data);\r\n\r\n        this.setState({cctvData: result});\r\n    };\r\n\r\n    handleClickCCTV(index, cctvurl, lat, lng) {\r\n        const infoWindowContent =\r\n            `<div>\r\n                <video src=${cctvurl} width=\"295\" height=\"220\" controls autoPlay loop/>;\r\n            </div>`;\r\n\r\n        const infoWindow = new window.N.InfoWindow({\r\n            position: new window.N.LatLng(lat, lng),\r\n            content: infoWindowContent,\r\n            backgroundColor: \"#eee\",\r\n            borderColor: \"#3F4D67\",\r\n            borderWidth: 5,\r\n            anchorSize: new window.N.Size(0, 20),\r\n            anchorSkew: true,\r\n            anchorColor: \"#eee\",\r\n            pixelOffset: new window.N.Point(0, -10)\r\n        });\r\n\r\n        infoWindow.open(this.props.getMap());\r\n\r\n        if (!this.state.activatedInfoWindow) {\r\n            this.setState({activatedInfoWindow: {[index]: false}});\r\n        }\r\n\r\n        if (!this.state.activatedInfoWindow[index]) {\r\n            infoWindow.open(this.props.getMap());\r\n        } else {\r\n            infoWindow.close();\r\n        }\r\n\r\n        this.setState(prevState => (\r\n            {activatedInfoWindow: {[index]: !prevState.activatedInfoWindow[index]}, ...prevState.activatedInfoWindow}));\r\n    };\r\n\r\n    handleRenderMarkers = () => {\r\n        /*const style = {\r\n            margin: '0px',\r\n            padding: '0px',\r\n            border: '0px solid transparent',\r\n            display: 'block',\r\n            maxWidth: 'none',\r\n            maxHeight: 'none',\r\n            WebkitUserSelect: 'none',\r\n            position: 'absolute',\r\n            width: '20px',\r\n            height: '30px',\r\n            left: '0px',\r\n            top: '0px'\r\n        };\r\n\r\n        const htmlIcon = {\r\n            content: `<img src=${cctvIcon} alt='cctvIcon' style=${style}/>`,\r\n            anchor: new window.N.Point(11, 30)\r\n        };*/\r\n\r\n        const imageIcon = {\r\n            url: cctvIcon,\r\n            scaledSize: new window.N.Size(30, 30),\r\n            anchor: new window.N.Point(10, 30)\r\n        };\r\n\r\n        const itsMarkers = (\r\n            this.state.cctvData &&\r\n            this.state.cctvData.its.dataCount !== 0 &&\r\n            this.state.cctvData.its.data.map((item, index, array) => {\r\n                return (\r\n                    <Marker\r\n                        key={index}\r\n                        position={\r\n                            new window.N.LatLng(item.coordY, item.coordX)\r\n                        }\r\n                        title={item.cctvName}\r\n                        icon={imageIcon}\r\n                        animation={0}\r\n                        onClick={() => this.handleClickCCTV(index, item.cctvURL, item.coordY, item.coordX)}\r\n                    />\r\n                )\r\n            })\r\n        );\r\n\r\n        const exMarkers = (\r\n            this.state.cctvData &&\r\n            this.state.cctvData.ex.dataCount !== 0 &&\r\n            this.state.cctvData.ex.data.map((item, index, array) => {\r\n                return (\r\n                    <Marker\r\n                        key={index}\r\n                        position={\r\n                            new window.N.LatLng(item.coordY, item.coordX)\r\n                        }\r\n                        title={item.cctvName}\r\n                        icon={imageIcon}\r\n                        animation={0}\r\n                        onClick={() => this.handleClickCCTV(index, item.cctvURL, item.coordY, item.coordX)}\r\n                    />\r\n                )\r\n            })\r\n        );\r\n\r\n        return ([itsMarkers, exMarkers])\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                <AccidentMarkers getCCTVList={this.handleClickAccidentMarker.bind(this)}\r\n                                 changeZoom={this.props.changeZoom} changeCenter={this.props.changeCenter}\r\n                                 getMap={this.props.getMap}/>\r\n                {this.handleRenderMarkers()}\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nAccidentMarkers.defaultProps = {\r\n    changeZoom: () => {},\r\n    changeCenter: () => {},\r\n    getBounds: () => {},\r\n    getMap: () => {}\r\n};","import React, {Component} from 'react';\r\nimport {Marker} from 'react-naver-maps';\r\nimport CTPRVN from '../resource/CTPRVN.json';\r\nimport SIG from '../resource/SIG.json';\r\n\r\nexport default class CenterMarkers extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            mapData: CTPRVN.features,\r\n            centerData: [{ lat: 37.17382562913947, lng: 126.78880717195284 }],\r\n            mapLevel: 2\r\n        };\r\n    }\r\n\r\n    handleOnClick = index => {\r\n        /*if (this.props.getZoom <= 2) {\r\n            this.setState({\r\n                mapData: SIG.features,\r\n                mapLevel: 'sig'\r\n            });\r\n        } else if (this.props.getZoom <= 6) {\r\n            this.setState({mapLevel: 'emd'});\r\n        }\r\n\r\n        switch (this.state.mapLevel) {\r\n            case 'sig':\r\n                this.props.changeZoom(6);\r\n                break;\r\n\r\n            case 'emd':\r\n                this.props.changeZoom(9);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (this.state.mapLevel !== '') this.centerArray();\r\n\r\n        console.log(this.state.centerData);\r\n        this.props.changeCenter(this.state.centerData[index]);*/\r\n\r\n        this.setState({mapData: SIG.features, mapLevel: this.state.mapLevel < 10 ? this.state.mapLevel + 4 : 10});\r\n        console.log(this.state.mapLevel);\r\n        this.props.morph(this.state.centerData[index], this.state.mapLevel, {duration: 2000, easing: 'easeOutCubic'});\r\n        /*this.props.changeZoom(this.state.mapLevel);\r\n        this.props.changeCenter(this.state.centerData[index]);*/\r\n\r\n        setTimeout(() => {\r\n            this.centerArray();\r\n        }, 1200) // 1100: No smooth\r\n    };\r\n\r\n    handleOnDblclick = index => {\r\n        this.setState({mapData: CTPRVN.features, mapLevel: this.state.mapLevel > 2 ? this.state.mapLevel - 4: 2});\r\n        this.props.morph(this.state.centerData[index], this.state.mapLevel, {duration: 2000, easing: 'easeOutCubic'});\r\n        //this.props.changeZoom(this.state.mapLevel);\r\n\r\n        setTimeout(() => {\r\n            this.centerArray();\r\n        }, 1200)\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.centerArray();\r\n    }\r\n\r\n    optimization = (item) => {\r\n        return item.filter((item2, index, array) => {\r\n            return (\r\n                this.props.getBounds()._min.x <= item2.lng &&\r\n                this.props.getBounds()._max.x >= item2.lng &&\r\n                this.props.getBounds()._min.y <= item2.lat &&\r\n                this.props.getBounds()._max.y >= item2.lat\r\n            );\r\n        });\r\n    };\r\n\r\n // 현재 맵데이터의 최적화 한 중심좌표들\r\n    centerArray = () => {\r\n        const array = this.state.mapData.map(item => {\r\n            return item.geometry.coordinates.map((item2, index, array) => {\r\n                const centroid = this.centroid(item2);\r\n                return {lat: centroid[1], lng: centroid[0]};\r\n            });\r\n        });\r\n\r\n        this.setState({centerData: this.optimization(array.flat())});\r\n    };\r\n\r\n    centroid = item2 => {\r\n        let area = 0;\r\n        let factor = 0;\r\n        let centerX = 0;\r\n        let centerY = 0;\r\n\r\n        item2.forEach(\r\n            (element, index, array) =>\r\n                array.length - 1 > index &&\r\n                ((factor =\r\n                    element[0] * array[index + 1][1] - array[index + 1][0] * element[1]),\r\n                    (area += factor),\r\n                    (centerX += (element[0] + array[index + 1][0]) * factor),\r\n                    (centerY += (element[1] + array[index + 1][1]) * factor))\r\n        );\r\n        area *= 3;\r\n        factor = 1 / area;\r\n        centerX *= factor;\r\n        centerY *= factor;\r\n        return [centerX, centerY];\r\n    };\r\n\r\n    render() {\r\n        const centerMarkers = this.state.centerData.map((item, index, array) => {\r\n            return (\r\n                <Marker\r\n                    position={item}\r\n                    key={index}\r\n                    animation={0}\r\n                    onClick={this.handleOnClick.bind(this, index)}\r\n                    onDblclick={this.handleOnDblclick.bind(this, index)}\r\n                    title={index + '번'}\r\n                />\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                {centerMarkers}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nCenterMarkers.defaultProps = {\r\n    changeZoom: () => {},\r\n    changeCenter: () => {},\r\n    morph: () => {},\r\n    getZoom: () => {},\r\n    getBounds: () => {}\r\n};","import React, {Component} from 'react';\r\nimport CCTVMarkers from './CCTVMarkers';\r\nimport CenterMarkers from './CenterMarkers';\r\n\r\nimport Aux from \"../../../hoc/_Aux\";\r\n\r\nexport default class Markers extends Component {\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                {/*<CenterMarkers changeZoom={this.props.changeZoom} changeCenter={this.props.changeCenter} morph={this.props.morph}\r\n                               getZoom={this.props.getZoom} getBounds={this.props.getBounds}/>*/}\r\n                <CCTVMarkers changeZoom={this.props.changeZoom} changeCenter={this.props.changeCenter}\r\n                             getZoom={this.props.getZoom} getBounds={this.props.getBounds}\r\n                             getMap={this.props.getMap}/>\r\n            </Aux>\r\n        );\r\n    }\r\n}","import { ApiManager } from '../utils'\r\nimport { BASE_URL } from '../../../constant';\r\n\r\nconst $http = new ApiManager();\r\n\r\nexport function getAccidentRoad() {\r\n    const url = `${BASE_URL}/accidentroad`;\r\n    return $http.get(url);\r\n}\r\n\r\nexport function getRoadData() {\r\n    const url = `${BASE_URL}/getroad`;\r\n    return $http.get(url);\r\n}","import React, {Component} from 'react';\r\nimport {Polyline} from \"react-naver-maps\";\r\nimport * as RoadApi from '../api/RoadApi';\r\n\r\nimport Aux from \"../../../hoc/_Aux\";\r\n\r\nexport default class RoadPolyline extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            roadData: null,\r\n            areaRoadData: null,\r\n            accidentRoadData: null,\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n        return [(\r\n            this.state.roadData !== nextState.roadData),\r\n            this.state.accidentRoadData !== nextState.accidentRoadData\r\n        ];\r\n    }\r\n\r\n    componentDidMount() {\r\n        const getData = async () => {\r\n            await this.handleGetRoadData();\r\n            await this.handleGetAccidentRoad();\r\n        };\r\n\r\n        getData();\r\n\r\n        this.interval = setInterval(() => this.handleGetAccidentRoad(), 2000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval);\r\n    }\r\n\r\n    async handleGetRoadData() {\r\n        const result = await RoadApi.getRoadData();\r\n\r\n        this.setState({areaRoadData: result});\r\n    };\r\n\r\n    async handleGetAccidentRoad() {\r\n        const result = await RoadApi.getAccidentRoad();\r\n\r\n        this.setState({roadData: result},\r\n            () => this.state.roadData && this.handleGetAccidentRoadData()\r\n        );\r\n    };\r\n\r\n    handleGetAccidentRoadData = () => {\r\n        //guardrailID: \"1\", roadCode: \"265302006015\"\r\n        //roadName: \"가야대로\", cityprovinceCode: \"26\"\r\n\r\n        const roadName = this.state.roadData.map(item => {\r\n            return item.roadName;\r\n        });\r\n\r\n        // 나중에 추가\r\n        const cityprovinceCode = this.state.roadData.map(item => {\r\n            return item.cityprovinceCode;\r\n        });\r\n\r\n        const uniqRoadName = roadName.filter(\r\n            (item, index) => roadName.indexOf(item) === index\r\n        );\r\n\r\n        const accidentRoadData = uniqRoadName.map(item => {\r\n            return this.handleGetRoadLatLng(item);\r\n        });\r\n\r\n        /*this.setState({ accidentRoadData: accidentRoadData }, () =>\r\n            this.state.accidentRoadData.length !== 0 && this.state.accidentRoadData[0][1] // null exception\r\n        );*/\r\n        this.setState({ accidentRoadData: accidentRoadData });\r\n    };\r\n\r\n    handleGetRoadLatLng = (array) => {\r\n        const data = this.state.areaRoadData && this.state.areaRoadData.map(item => {\r\n            return (\r\n                item.properties.RN === array\r\n                    ? item.geometry.coordinates.map(item2 => {\r\n                        return item2.map(item3 => {\r\n                            return new window.N.LatLng(item3[1], item3[0]);\r\n                        });\r\n                    })\r\n                    : []\r\n            )\r\n        });\r\n\r\n        if (data) {\r\n            return data.flat();\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    handleRenderPolyline = () => {\r\n        if (this.state.accidentRoadData && this.state.accidentRoadData.length !== 0 && this.state.accidentRoadData[0]) {\r\n            return this.state.accidentRoadData.map((item, index, array) => {\r\n                return item.map((item, index, array) => {\r\n                    return (\r\n                        <Polyline\r\n                            key={index}\r\n                            path={item}\r\n                            strokeColor={\"#42D832\"}\r\n                            strokeOpacity={0.8}\r\n                            strokeWeight={7}\r\n                        />\r\n                    );\r\n                });\r\n            });\r\n        } else {\r\n            return null;\r\n        }\r\n        /*return (\r\n            this.state.accidentRoadData\r\n                ? this.state.accidentRoadData[0].map((item, index, array) => {\r\n                    return (\r\n                        <Polyline\r\n                            key={index}\r\n                            path={item}\r\n                            strokeColor={\"#42D832\"}\r\n                            strokeOpacity={0.8}\r\n                            strokeWeight={7}\r\n                        />\r\n                    );\r\n                })\r\n                : []\r\n        )*/\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                {this.handleRenderPolyline()}\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nRoadPolyline.defaultProps = {\r\n    changeZoom: () => {},\r\n    changeCenter: () => {},\r\n};\r\n/*\r\nimport React, { Component } from \"react\";\r\nimport { Polyline } from \"react-naver-maps\";\r\nimport * as RoadApi from \"./api/RoadApi\";\r\n\r\nimport AccidentMarkers from \"./marker/AccidentMarkers\";\r\nimport Aux from \"../../hoc/_Aux\";\r\n\r\nimport A0 from \"./resource/roadData/강원.json\";\r\nimport A1 from \"./resource/roadData/경기.json\";\r\nimport A2 from \"./resource/roadData/경남.json\";\r\nimport A3 from \"./resource/roadData/경북.json\";\r\nimport A4 from \"./resource/roadData/광주.json\";\r\nimport A5 from \"./resource/roadData/대구.json\";\r\nimport A6 from \"./resource/roadData/대전.json\";\r\nimport A7 from \"./resource/roadData/부산.json\";\r\nimport A8 from \"./resource/roadData/서울.json\";\r\nimport A9 from \"./resource/roadData/세종.json\";\r\nimport A10 from \"./resource/roadData/울산.json\";\r\nimport A11 from \"./resource/roadData/인천.json\";\r\nimport A12 from \"./resource/roadData/전남.json\";\r\nimport A13 from \"./resource/roadData/전북.json\";\r\nimport A14 from \"./resource/roadData/제주.json\";\r\nimport A15 from \"./resource/roadData/충남.json\";\r\nimport A16 from \"./resource/roadData/충북.json\";\r\n\r\nexport default class RoadPolyline extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            roadData: null,\r\n            areaRoadData: [\r\n                A0.features,\r\n                A1.features,\r\n                A2.features,\r\n                A3.features,\r\n                A4.features,\r\n                A5.features,\r\n                A6.features,\r\n                A7.features,\r\n                A8.features,\r\n                A9.features,\r\n                A10.features,\r\n                A11.features,\r\n                A12.features,\r\n                A13.features,\r\n                A14.features,\r\n                A15.features,\r\n                A16.features\r\n            ],\r\n            accidentRoadData: null\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n        return this.state.roadData !== nextState.roadData;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const getData = async () => {\r\n            await this.handleGetAccidentRoad();\r\n        };\r\n\r\n        getData();\r\n\r\n        this.interval = setInterval(() => this.handleGetAccidentRoad(), 2000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval);\r\n    }\r\n\r\n    //   handleClickRoadPolyline() {\r\n    //     const getData = async () => {\r\n    //       await this.handleGetAccidentRoad();\r\n    //     };\r\n\r\n    //     getData();\r\n    //   }\r\n\r\n    async handleGetAccidentRoad() {\r\n        const result = await RoadApi.getAccidentRoad();\r\n        this.setState(\r\n            { roadData: result },\r\n            () => this.state.roadData !== null && this.handleCalRoadData()\r\n        );\r\n    }\r\n\r\n    handleCalRoadData = () => {\r\n        //guardrailID: \"1\", roadCode: \"265302006015\"\r\n        //roadName: \"가야대로\", cityprovinceCode: \"26\"\r\n\r\n        const roadName = this.state.roadData.map(item => {\r\n            return item.roadName;\r\n        });\r\n\r\n        // 나중에 추가\r\n        const cityprovinceCode = this.state.roadData.map(item => {\r\n            return item.cityprovinceCode;\r\n        });\r\n\r\n        const uniqroadName = roadName.filter(\r\n            (item, index) => roadName.indexOf(item) === index\r\n        );\r\n\r\n        const accidentRoadData = uniqroadName.map(item => {\r\n            return this.handleGetRoadData(item);\r\n        });\r\n\r\n        this.setState({ accidentRoadData: accidentRoadData }, () =>\r\n            console.log(this.state.accidentRoadData[0][1])\r\n        );\r\n    };\r\n\r\n    handleGetRoadData = array => {\r\n        const Data = this.state.areaRoadData[7].map(item => {\r\n            return item.properties.RN === array\r\n                ? item.geometry.coordinates.map(item2 => {\r\n                    return item2.map(item3 => {\r\n                        return new window.N.LatLng(item3[1], item3[0]);\r\n                    });\r\n                })\r\n                : [];\r\n        });\r\n\r\n        return Data.flat();\r\n    };\r\n    DrawPolyLine = () => {\r\n        return this.state.accidentRoadData !== null\r\n            ? this.state.accidentRoadData[0].map((item, index, array) => {\r\n                return (\r\n                    <Polyline\r\n                        key={index}\r\n                        path={item}\r\n                        strokeColor={\"#000000\"}\r\n                        strokeOpacity={1}\r\n                        strokeWeight={7}\r\n                    />\r\n                );\r\n            })\r\n            : null;\r\n    };\r\n\r\n    render() {\r\n        return <Aux>{this.DrawPolyLine()}</Aux>;\r\n    }\r\n}\r\n\r\nRoadPolyline.defaultProps = {\r\n    changeZoom: () => {},\r\n    changeCenter: () => {}\r\n};*/\r\n","export default __webpack_public_path__ + \"static/media/exclamation_mark.b794e15c.gif\";","export default __webpack_public_path__ + \"static/media/check_mark.79e27354.png\";","import { ApiManager } from '../utils'\r\nimport { BASE_URL } from '../../../constant';\r\n\r\nconst $http = new ApiManager();\r\n\r\nexport function postFixGuardrail(data) {\r\n    const url = `${BASE_URL}/fixguardrail`;\r\n    return $http.post(url, data);\r\n}","import React, {Component} from 'react';\r\nimport * as AccidentApi from './marker/api/Api';\r\n\r\nimport {Card, Table, Button, Modal} from 'react-bootstrap';\r\n\r\nimport Aux from '../../hoc/_Aux';\r\n\r\nimport exclamationMarkIcon from '../../assets/images/exclamation_mark.gif';\r\nimport checkMarkIcon from '../../assets/images/check_mark.png';\r\n\r\nimport CONSTANT from \"../../constant\";\r\nimport * as GuardrailApi from './api/GuardrailApi';\r\nimport {dateFormatConverter} from \"./utils\";\r\n\r\nexport default class AccidentEvents extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            accidentInfo: null,\r\n            modalVisible: false,\r\n            selectedGuardrailIndex: 0,\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n        return (this.state.accidentInfo !== nextState.accidentInfo);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const getData = async () => {\r\n            await this.handleGetAccidentInfo();\r\n        };\r\n\r\n        getData();\r\n\r\n        this.interval = setInterval(() => this.handleGetAccidentInfo(), 2000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval);\r\n    }\r\n\r\n    async handleGetAccidentInfo() {\r\n        const result = await AccidentApi.getAccidentInfo();\r\n\r\n        this.setState({accidentInfo: result});\r\n    };\r\n\r\n    handleToggleModal = (index) => {\r\n        this.setState(prevState => ({modalVisible: !prevState.modalVisible, selectedGuardrailIndex: index - 1}));\r\n    };\r\n\r\n    handleCloseModal = (e) => {\r\n        if (e) e.preventDefault();\r\n\r\n        this.setState({modalVisible: false});\r\n    };\r\n\r\n    async handleFixGuardrail(index) {\r\n        await GuardrailApi.postFixGuardrail({index: index});\r\n\r\n        this.handleGetAccidentInfo();\r\n        this.handleCloseModal();\r\n    };\r\n\r\n    handleRenderModal = () => {\r\n        const data = this.state.accidentInfo && this.state.accidentInfo[this.state.selectedGuardrailIndex];\r\n        const id = this.state.selectedGuardrailIndex + 1;\r\n        const address = data && data.cityprovinceName + ' ' + data.districtName + ' ' + data.emdName + ' ' + data.roadName;\r\n        const date = data && dateFormatConverter(data.accidentDate, null, 'MDhms');\r\n        const state = data && data.guardrailState === '1' ? '사고 발생' : '수리 완료';\r\n\r\n        return (\r\n            <Modal\r\n                show={this.state.modalVisible}\r\n                onHide={this.handleToggleModal}\r\n                size='lg'\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Guardrail Monitoring System\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <h4 className='text-center'>{id}번 가드레일</h4>\r\n                    <p className='text-center' style={\r\n                        {color: 'crimson'}\r\n                    }>\r\n                        발생 지역: {address}<br/>\r\n                        발생 시각: {date}<br/>\r\n                        가드레일 상태: {state}<br/>\r\n                    </p>\r\n                    <p className='text-center'>\r\n                        수리 완료 상태로 변경할까요?\r\n                    </p>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant='primary' onClick={() => this.handleFixGuardrail(id)}>Submit</Button>\r\n                    <Button variant='secondary' onClick={this.handleCloseModal}>Close</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        )\r\n    };\r\n\r\n    handleRenderAccidentEventsTable = () => {\r\n        return (\r\n            this.state.accidentInfo &&\r\n            this.state.accidentInfo.map((data, index, array) => {\r\n                const address = data.cityprovinceName + ' ' + data.districtName + ' ' + data.emdName + ' ' + data.roadName;\r\n                const date = dateFormatConverter(data.accidentDate, null, 'MDhms');\r\n                const state = data.guardrailState;\r\n\r\n                return (\r\n                    <tr key={index} className=\"unread\">\r\n                        <td>\r\n                            {state === '1' ?\r\n                                <img className=\"rounded-circle\"\r\n                                     style={{width: '85px', filter: 'saturate(100) hue-rotate(238deg)'}}\r\n                                     src={exclamationMarkIcon} alt=\"exclamationMarkIcon\"/> :\r\n                                <img className=\"rounded-circle\"\r\n                                     style={{width: '40px', marginLeft:'20px'}}\r\n                                     src={checkMarkIcon} alt=\"checkMarkIcon\"/>}\r\n                        </td>\r\n                        <td>\r\n                            <h6 className=\"mb-1\">지역</h6>\r\n                            <p className=\"m-0\">\r\n                                {address}\r\n                            </p>\r\n                        </td>\r\n                        <td>\r\n                            <h6 className=\"mb-1\">발생 시각</h6>\r\n                            <h6 className=\"text-muted\">\r\n                                {state === '1' ?\r\n                                    <i className=\"fa fa-circle text-c-red f-10 m-r-15\"/> :\r\n                                    <i className=\"fa fa-circle text-c-green f-10 m-r-15\"/>}\r\n                                {date}\r\n                            </h6>\r\n                        </td>\r\n                        {state === '1' ?\r\n                            <td>\r\n                                <a href={CONSTANT.BLANK_LINK} className=\"label theme-bg2 text-white f-12\"\r\n                                   onClick={(e) => {\r\n                                       e.preventDefault();\r\n                                       const coord = {\r\n                                           lat: this.state.accidentInfo[index].guardrailLatitude,\r\n                                           lng: this.state.accidentInfo[index].guardrailLongitude\r\n                                       };\r\n                                       this.props.morph(coord, 8, {duration: 2000, easing: 'easeOutCubic'});\r\n                                   }}\r\n                                >Move to marker</a>\r\n                                <a href={CONSTANT.BLANK_LINK} className=\"label theme-bg text-white f-12\"\r\n                                   onClick={(e) => {\r\n                                       e.preventDefault();\r\n                                       this.handleToggleModal(this.state.accidentInfo[index].guardrailID);\r\n                                   }}\r\n                                >Done</a>\r\n                            </td> : <td/>\r\n                        }\r\n                    </tr>\r\n                )\r\n            })\r\n        );\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                {this.handleRenderModal()}\r\n                <Card className='Recent-Users'>\r\n                    <Card.Header>\r\n                        <Card.Title as='h5'>List of accidents</Card.Title>\r\n                    </Card.Header>\r\n                    <Card.Body className='px-0 py-2'>\r\n                        <Table responsive hover>\r\n                            <tbody>\r\n                                {this.handleRenderAccidentEventsTable()}\r\n                            </tbody>\r\n                        </Table>\r\n                    </Card.Body>\r\n                </Card>\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nAccidentEvents.defaultProps = {\r\n    morph: () => {}\r\n};","export default __webpack_public_path__ + \"static/media/back_button.f67404fb.jpg\";","import { ApiManager } from '../utils'\r\nimport { BASE_URL } from '../../../constant';\r\n\r\nconst $http = new ApiManager();\r\n\r\nexport function getPolygonData() {\r\n    const url = `${BASE_URL}/polygondata`;\r\n    return $http.get(url);\r\n}","export function drawPolygons(mapData) {\r\n    return (\r\n        mapData.map(item => {\r\n            return item.geometry.coordinates.map(item2 => {\r\n                return item2.map(item3 => {\r\n                    return new window.N.LatLng(item3[1], item3[0]);\r\n                });\r\n            });\r\n        })\r\n    )\r\n}\r\n\r\nexport function areaChange(mapData, ctpName, index) {\r\n    return mapData.filter(item => {\r\n        return (\r\n            ctpName !== null &&\r\n            item.properties.SIG_CD.substring(0, 2).includes(ctpName[index])\r\n        );\r\n    });\r\n}\r\n\r\nexport function centerXY(mapData, index) {\r\n    const data = mapData.map(item => {\r\n        let zeroIndex = [];\r\n        zeroIndex.push(item.geometry.coordinates[0]);\r\n        return zeroIndex.map((item, index, array) => {\r\n            const centroidData = centroid(item);\r\n            return { lat: centroidData[1], lng: centroidData[0] };\r\n        });\r\n    });\r\n\r\n    return data.flat()[index];\r\n}\r\n\r\nfunction centroid(data) {\r\n    let area = 0;\r\n    let factor = 0;\r\n    let centerX = 0;\r\n    let centerY = 0;\r\n\r\n    data.forEach(\r\n        (element, index, array) =>\r\n            array.length - 1 > index &&\r\n            ((factor =\r\n                element[0] * array[index + 1][1] - array[index + 1][0] * element[1]),\r\n            (area += factor),\r\n            (centerX += (element[0] + array[index + 1][0]) * factor),\r\n            (centerY += (element[1] + array[index + 1][1]) * factor))\r\n    );\r\n\r\n    area *= 3;\r\n    factor = 1 / area;\r\n    centerX *= factor;\r\n    centerY *= factor;\r\n\r\n    return [centerX, centerY];\r\n}","import React, { Component } from \"react\";\r\nimport { Polygon } from \"react-naver-maps\";\r\n\r\nimport * as geoData from '../resource';\r\n\r\nimport Aux from \"../../../hoc/_Aux\";\r\n\r\nimport * as PolygonApi from '../api/PolygonApi';\r\nimport * as Utils from \"./utils\";\r\n\r\nexport default class Polygons extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            mapData: geoData.CTPRVN.features,\r\n            prevMapData: geoData.CTPRVN.features,\r\n            cityprovinceCode: '',\r\n            accidentArea: null,\r\n            accidentAreaIndex: '',\r\n            id: -1,\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n        return [\r\n            (this.state.accidentArea !== nextState.accidentArea),\r\n            (this.state.mapData !== nextState.mapData),\r\n            (this.state.id !== nextState.id)\r\n        ];\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.props.getZoom <= 11 && prevProps.getZoom >= 13) {\r\n            this.setState({mapData: this.state.prevMapData});\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const getData = async () => {\r\n            await this.handleGetPolygonData();\r\n        };\r\n\r\n        getData();\r\n\r\n        const cityprovinceCode = this.state.mapData.map(item => {\r\n            return item.properties.CTPRVN_CD;\r\n        });\r\n\r\n        this.setState({cityprovinceCode});\r\n\r\n        this.interval = setInterval(() => this.handleGetPolygonData(), 2000);\r\n        this.mapInterval = setInterval(() => this.handleWatchMapData(), 1000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval);\r\n        clearInterval(this.mapInterval);\r\n    }\r\n\r\n    async handleGetPolygonData() {\r\n        const result = await PolygonApi.getPolygonData();\r\n\r\n        this.setState({accidentArea: result},\r\n            () => this.state.accidentArea && this.handleSelectedArea()\r\n        );\r\n    };\r\n\r\n    handleSelectedArea = () => {\r\n        const cityprovinceCode = this.state.mapData.map((item, index, array) => {\r\n            return item.properties.CTPRVN_CD;\r\n        });\r\n\r\n        const districtCode = this.state.mapData.map((item, index, array) => {\r\n            return item.properties.SIG_CD;\r\n        });\r\n\r\n        const accidentAreaOfCityprovinceCode = this.state.accidentArea && this.state.accidentArea.map(item => {\r\n            return item.cityprovinceCode;\r\n        });\r\n\r\n        const accidentAreaOfDistrictCode  = this.state.accidentArea && this.state.accidentArea.map(item => {\r\n            return item.districtCode;\r\n        });\r\n\r\n        const accidentAreaCityprovinceIndex = cityprovinceCode.map(item => {\r\n            return accidentAreaOfCityprovinceCode.indexOf(item);\r\n        });\r\n\r\n        const accidentAreaDistrictIndex = districtCode.map(item => {\r\n            return accidentAreaOfDistrictCode.indexOf(item);\r\n        });\r\n\r\n        this.props.getZoom === 7\r\n            ? this.setState({\r\n                accidentAreaIndex: accidentAreaCityprovinceIndex\r\n            })\r\n            : this.setState({\r\n                accidentAreaIndex: accidentAreaDistrictIndex\r\n            });\r\n    };\r\n\r\n    handleMouseClick(index) {\r\n        switch (this.props.getZoom) {\r\n            case 7:\r\n                this.props.changeZoom(11);\r\n                this.props.changeCenter(Utils.centerXY(this.state.mapData, index).lat, Utils.centerXY(this.state.mapData, index).lng);\r\n                this.setState({mapData: Utils.areaChange(geoData.SIG.features, this.state.cityprovinceCode, index)});\r\n                break;\r\n\r\n            case 11:\r\n                this.props.changeZoom(13);\r\n                this.props.changeCenter(Utils.centerXY(this.state.mapData, index).lat, Utils.centerXY(this.state.mapData, index).lng);\r\n                this.setState(prevState => ({prevMapData: prevState.mapData}));\r\n                this.setState({mapData: []});\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    handleWatchMapData = () => {\r\n        switch (this.props.getZoom) {\r\n            case 7:\r\n                this.setState({mapData: geoData.CTPRVN.features});\r\n                break;\r\n\r\n            case 11:\r\n                this.setState(prevState => ({mapData: prevState.mapData}));\r\n                break;\r\n\r\n            case 13:\r\n                this.setState({mapData: []});\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    handleRenderPolygons = () => {\r\n        return (\r\n            Utils.drawPolygons(this.state.mapData).map(\r\n                (item, index) => (\r\n                    <Polygon\r\n                        key={index}\r\n                        paths={item}\r\n                        fillColor={(\r\n                            this.state.accidentAreaIndex && this.state.accidentAreaIndex[index] !== -1) ||\r\n                            this.state.id === index\r\n                            ? \"#ffafeeee\"\r\n                            : \"#fff\"\r\n                        }\r\n                        fillOpacity={0.5}\r\n                        strokeColor={\"#004c80\"}\r\n                        strokeOpacity={1}\r\n                        strokeWeight={2}\r\n                        clickable={true}\r\n                        onClick={() => this.handleMouseClick(index)}\r\n                        onMouseover={() => {\r\n                            return this.setState({\r\n                                id: index\r\n                            });\r\n                        }}\r\n                        onMouseout={() => {\r\n                            return this.setState({\r\n                                id: -1\r\n                            });\r\n                        }}\r\n                    />\r\n                )\r\n            )\r\n        );\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                {this.handleRenderPolygons()}\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nPolygons.defaultProps = {\r\n    changeZoom: () => {},\r\n    changeCenter: () => {},\r\n    getZoom: () => {}\r\n};","import React, {Component} from \"react\";\r\nimport {NaverMap} from \"react-naver-maps\";\r\nimport Markers from './marker';\r\nimport RoadPolyline from \"./polyline/RoadPolyline\";\r\nimport AccidentEvents from \"./AccidentEvents\";\r\nimport Aux from \"../../hoc/_Aux\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport backButtonIcon from \"../../assets/images/back_button.jpg\";\r\nimport Polygons from \"./polygon/Polygons\";\r\nimport {Col} from \"react-bootstrap\";\r\n\r\nexport default class Map extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clickable: true,\r\n            scrollWheel: false,\r\n            disableDoubleClickZoom: true,\r\n            disableDoubleTapZoom: true,\r\n            maxZoom: 13,\r\n            minZoom: 7,\r\n            zoom: 7,\r\n            center: new window.N.LatLng(36.3634918, 127.6751462),\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.changeBounds(this.mapRef.getBounds());\r\n        this.handleBackButton();\r\n    }\r\n\r\n    handleZoomChanged(zoom) {\r\n        this.setState({zoom});\r\n    };\r\n\r\n    handleCenterChanged(lat, lng) {\r\n        this.setState({center: new window.N.LatLng(lat, lng)});\r\n    };\r\n\r\n    handleMorph(coord, zoom, transitionOptions) {\r\n        this.mapRef.morph(coord, zoom, transitionOptions);\r\n    };\r\n\r\n    handleChangeBounds = () => {\r\n        setTimeout(() => {\r\n            this.changeBounds(this.mapRef.getBounds());\r\n            this.handleGetBounds();\r\n        }, 100);\r\n    };\r\n\r\n    changeBounds = (bounds) => {\r\n        this.setState({bounds});\r\n    };\r\n\r\n    handleGetBounds() {\r\n        return this.state.bounds ? this.state.bounds : {\r\n            _min: {\r\n                x: 122.0831272,\r\n                y: 33.9358058\r\n            },\r\n            _max: {\r\n                x: 132.7145806,\r\n                y: 38.5547629\r\n            }\r\n        };\r\n    };\r\n\r\n    handleGetMap() {\r\n        return this.mapRef.map; // instance or map\r\n    };\r\n\r\n    handleBackButton() {\r\n        window.N.Event.once(this.mapRef.map, 'init_stylemap', () => {\r\n            const backButtonHtml =\r\n                `<button>\r\n                    <img src=${backButtonIcon} style=\"width: 20px; height: 20px;\" alt=\"backButtonIcon\"/>\r\n             </button>`;\r\n\r\n            const customControl = new window.N.CustomControl(backButtonHtml, {\r\n                position: window.N.Position.TOP_LEFT\r\n            });\r\n\r\n            customControl.setMap(this.mapRef.map);\r\n            window.N.Event.addDOMListener(customControl.getElement(), 'click', () => {\r\n                if (this.state.zoom <= 11) {\r\n                    this.handleZoomChanged(7);\r\n                } else if (this.state.zoom > 11 && this.state.zoom <= 13) {\r\n                    this.handleZoomChanged(11);\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    handleRenderStats = () => {\r\n        return (\r\n            <Col md={6} xl={4}>\r\n                <Card>\r\n                    <Card.Body className='border-bottom'>\r\n                        <div className=\"row d-flex align-items-center\">\r\n                            <div className=\"col-auto\">\r\n                                <i className=\"feather icon-zap f-30 text-c-green\"/>\r\n                            </div>\r\n                            <div className=\"col\">\r\n                                <h3 className=\"f-w-300\">235</h3>\r\n                                <span className=\"d-block text-uppercase\">total ideas</span>\r\n                            </div>\r\n                        </div>\r\n                    </Card.Body>\r\n                </Card>\r\n            </Col>\r\n        )\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                {/*this.handleRenderStats()*/}\r\n                <Card>\r\n                    <Card.Header>\r\n                        <Card.Title as=\"h5\">Guardrail Monitoring Map</Card.Title>\r\n                    </Card.Header>\r\n                    <Card.Body>\r\n                        <div style={{height: '100%', width: '100%'}}>\r\n                            <NaverMap\r\n                                naverRef={ref => {\r\n                                    this.mapRef = ref;\r\n                                }}\r\n                                id=\"guardrail_monitoring_map\"\r\n                                style={{\r\n                                    width: \"100%\",\r\n                                    height: \"500px\"\r\n                                }}\r\n                                maxZoom={this.state.maxZoom}\r\n                                minZoom={this.state.minZoom}\r\n                                disableDoubleClickZoom={this.state.disableDoubleClickZoom}\r\n                                disableDoubleTapZoom={this.state.disableDoubleTapZoom}\r\n                                scrollWheel={this.state.scrollWheel}\r\n                                zoom={this.state.zoom}\r\n                                onZoomChanged={this.handleZoomChanged.bind(this)}\r\n                                center={this.state.center}\r\n                                //onCenterChanged={this.handleCenterChanged.bind(this)}\r\n                                bounds={this.state.bounds}\r\n                                //onBoundsChanged={this.handleChangeBounds}\r\n                                onIdle={this.handleChangeBounds}\r\n                            >\r\n                                <Polygons changeZoom={this.handleZoomChanged.bind(this)}\r\n                                          changeCenter={this.handleCenterChanged.bind(this)}\r\n                                          getZoom={this.state.zoom}\r\n                                />\r\n                                <Markers getBounds={this.handleGetBounds.bind(this)}\r\n                                         changeZoom={this.handleZoomChanged.bind(this)}\r\n                                         changeCenter={this.handleCenterChanged.bind(this)}\r\n                                         morph={this.handleMorph.bind(this)}\r\n                                         getZoom={this.state.zoom}\r\n                                         getMap={this.handleGetMap.bind(this)}\r\n                                />\r\n                                <RoadPolyline changeZoom={this.handleZoomChanged.bind(this)}\r\n                                              changeCenter={this.handleCenterChanged.bind(this)}\r\n                                />\r\n                            </NaverMap>\r\n                        </div>\r\n                    </Card.Body>\r\n                </Card>\r\n                {<AccidentEvents morph={this.handleMorph.bind(this)}/>}\r\n            </Aux>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport {RenderAfterNavermapsLoaded} from \"react-naver-maps\";\r\n\r\nimport Aux from \"../../hoc/_Aux\";\r\n\r\nimport WebNotification from \"../Monitoring/utils/notification\";\r\nimport Map from \"../Monitoring/Map\";\r\n\r\nclass Dashboard extends React.Component {\r\n    render() {\r\n        return (\r\n            <Aux>\r\n                <WebNotification/>\r\n                <RenderAfterNavermapsLoaded\r\n                    //ncpClientId=\"uzfjt1p4qj\"\r\n                    ncpClientId=\"hevkarb0sg\"\r\n                    error={<p>Maps Load Error</p>}\r\n                    loading={<p>Maps Loading...</p>}\r\n                >\r\n                    <Map/>\r\n                </RenderAfterNavermapsLoaded>\r\n                {/*JSON.stringify(cctvList)*/}\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Dashboard;","/**\r\n *\r\n */\r\n// import { getCookie } from '../Utils';\r\nexport default class ApiManager {\r\n    /**\r\n     *\r\n     */\r\n    constructor() {\r\n        if (!ApiManager.instance) {\r\n            // 싱글톤 변수 할당\r\n            ApiManager.instance = this;\r\n        }\r\n        return ApiManager.instance;\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    setHeaders = (headers = {}) => {\r\n        this.headers = {\r\n            ...this.headers,\r\n            headers\r\n        };\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    getHeaders = () => {\r\n        this.headers = {\r\n            'Content-Type': 'application/json; charset=UTF-8',\r\n            // 'Content-Type': 'application/json;',\r\n            // \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n            // Authorization: `Bearer ${getCookie('fresh_a_token')}`\r\n        };\r\n        return this.headers;\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    get = url => this.getRequest(url, 'GET');\r\n    delete = (url, body = null, stringify = true) =>\r\n        this.deleteRequest(url, body, stringify, 'DELETE');\r\n    post = (url, body = null, stringify = true) =>\r\n        this.postRequest(url, body, stringify, 'POST');\r\n    put = (url, body = null, stringify = true) =>\r\n        this.postRequest(url, body, stringify, 'PUT');\r\n    multipart = (url, body = null) => this.multipartRequest(url, body);\r\n\r\n    /**\r\n     * GET & DELETE\r\n     */\r\n    getRequest = async (url, method = 'GET') => {\r\n        try {\r\n            const headers = this.getHeaders();\r\n            const response = await fetch(url, {\r\n                method,\r\n                headers\r\n            });\r\n            const responseJson = await response.json();\r\n            return responseJson;\r\n        } catch (error) {\r\n            return {\r\n                code: 500,\r\n                message: error\r\n            };\r\n        }\r\n    };\r\n\r\n    /**\r\n     * POST & PUT\r\n     */\r\n    postRequest = async (url, body = null, stringify = true, method = 'POST') => {\r\n        try {\r\n            const bodyData = body ? (stringify ? JSON.stringify(body) : body) : {};\r\n            const headers = this.getHeaders();\r\n            console.log('headers : ', headers);\r\n\r\n            const response = await fetch(url, {\r\n                method,\r\n                headers,\r\n                ...(body && { body: bodyData })\r\n                // body: JSON.stringify(body)\r\n            });\r\n            const responseJson = await response.json();\r\n            console.log('ERRO : ', responseJson);\r\n            return responseJson;\r\n        } catch (error) {\r\n            return {\r\n                code: 500,\r\n                message: error\r\n            };\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Multipart File\r\n     */\r\n    multipartRequest = async (\r\n        url,\r\n        body = null,\r\n        stringify = true,\r\n        method = 'POST'\r\n    ) => {\r\n        try {\r\n            const response = await fetch(url, {\r\n                method,\r\n                headers: {\r\n                    Accept: '*/*',\r\n                    'Cache-Control': 'no-cache',\r\n                    'Accept-Encoding': 'gzip, deflate',\r\n                    'cache-control': 'no-cache',\r\n                    'Access-Control-Allow-Origin': '*', // Required for CORS support to work\r\n                    'Access-Control-Allow-Credentials': true // Required for cookies, authorization headers with HTTPS\r\n                },\r\n                processData: false,\r\n                contentType: false,\r\n                mimeType: 'multipart/form-data',\r\n                body: body\r\n            });\r\n            const responseJson = await response.json();\r\n            console.log('ERRO : ', responseJson);\r\n            return responseJson;\r\n        } catch (error) {\r\n            console.log('요기냐 ? ');\r\n            return {\r\n                code: 500,\r\n                message: error\r\n            };\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Delete Mapping\r\n     */\r\n\r\n    deleteRequest = async (\r\n        url,\r\n        body = null,\r\n        stringify = true,\r\n        method = 'DELETE'\r\n    ) => {\r\n        try {\r\n            const bodyData = body ? (stringify ? JSON.stringify(body) : body) : {};\r\n            const headers = this.getHeaders();\r\n            console.log('headers : ', headers);\r\n\r\n            const response = await fetch(url, {\r\n                method,\r\n                headers,\r\n                ...(body && { body: bodyData })\r\n                // body: JSON.stringify(body)\r\n            });\r\n            const responseJson = await response.json();\r\n            console.log('ERRO : ', responseJson);\r\n            return responseJson;\r\n        } catch (error) {\r\n            return {\r\n                code: 500,\r\n                message: error\r\n            };\r\n        }\r\n    };\r\n}\r\n","export { default as ApiManager } from './ApiManager';\r\n\r\n/*  timestamp 날짜형식 변환  */\r\nconst timestampDefaultFormat = {\r\n    Y: \".\",\r\n    M: \".\",\r\n    D: \"\",\r\n    h: \":\",\r\n    m: \":\",\r\n    s: \"\"\r\n};\r\n\r\n/** Timstamp to custom format */\r\nexport const dateFormatConverter = (\r\n    ts,\r\n    customFormat = null,\r\n    filters = null\r\n) => {\r\n    let format = { ...timestampDefaultFormat };\r\n    if (customFormat) format = { ...format, ...customFormat };\r\n    const date = new Date(ts);\r\n    let result = {\r\n        Y: date.getFullYear(),\r\n        M:\r\n            date.getMonth() + 1 < 10\r\n                ? `0${date.getMonth() + 1}`\r\n                : date.getMonth() + 1,\r\n        D: date.getDate() + 1 < 10 ? `0${date.getDate() + 1}` : date.getDate() + 1,\r\n        h:\r\n            date.getHours() + 1 < 10\r\n                ? `0${date.getHours() + 1}`\r\n                : date.getHours() + 1,\r\n        m:\r\n            date.getMinutes() + 1 < 10\r\n                ? `0${date.getMinutes() + 1}`\r\n                : date.getMinutes() + 1,\r\n        s:\r\n            date.getSeconds() + 1 < 10\r\n                ? `0${date.getSeconds() + 1}`\r\n                : date.getSeconds() + 1\r\n    };\r\n\r\n    if (filters) {\r\n        let rr = \"\";\r\n        for (let i of filters) {\r\n            rr += `${result[i]}${format[i]} `;\r\n        }\r\n        return rr;\r\n    }\r\n    return `${result.Y}${format.Y}${result.M}${format.M}${result.D}${format.D} ${result.h}${format.h}${result.m}${format.m}${result.s}${format.s}`;\r\n};\r\n\r\n/**\r\n * 금액 포맷터\r\n */\r\nexport const stringToMoneyFormat = (v, unit = \"\") => {\r\n    const value = String(v)\r\n        .split(\"\")\r\n        .reverse()\r\n        .join(\"\");\r\n    const valueLength = value.length;\r\n    let result = \"\";\r\n    for (let ii in value) {\r\n        result += String(value[ii]);\r\n        if ((ii + 1) % 3 === 0 && ii < valueLength - 1) {\r\n            result += \",\";\r\n        }\r\n    }\r\n    return `${result\r\n        .split(\"\")\r\n        .reverse()\r\n        .join(\"\")}${unit}`;\r\n};\r\n\r\n/**\r\n *\r\n */\r\nexport const momentDateToString = value => {\r\n    const year = value.year();\r\n    const month =\r\n        value.month() + 1 < 10 ? `0${value.month() + 1}` : value.month() + 1;\r\n    const day = value.date() < 10 ? `0${value.date()}` : value.date();\r\n\r\n    return `${year}-${month}-${day}`;\r\n};\r\n\r\n\r\n\r\n/**\r\n * setSession\r\n * @param {*} url\r\n * @오경우 2019-10-14 14:59:06\r\n */\r\nexport const setSession = (key, value) => {\r\n    window.sessionStorage.setItem(key, JSON.stringify(value));\r\n    if (getSession(key) !== null) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\n\r\n/**\r\n * getSession\r\n * @param {*} url\r\n * @오경우 2019-10-14 14:59:08\r\n */\r\nexport const getSession = key => {\r\n    const session = window.sessionStorage.getItem(key);\r\n    return JSON.parse(session);\r\n};\r\n\r\nexport const clearSession = () => {\r\n    window.sessionStorage.clear();\r\n};\r\n"],"sourceRoot":""}